#include QMK_KEYBOARD_H
#include "action_layer.h"
#include "version.h"

enum custom_layers {
    _MOD_DH,
    _NUMB_SYMB,
    _FUNC_PUNC,
};

// I have a layer on semi-colon that when held down by my pinky, A and S become
// ( and ), D and F become { and }, and finally J and K become [ and ]. Don't
// know how I worked without it!
// https://www.reddit.com/r/MechanicalKeyboards/comments/8doesg/dvorak_fingers_vs_standard_fingers/dxqpk3n/
// `~!@#$%^&*()-_=+,<.>/?;:'"[{]}\|
// There are 32 symbols
// ~!@#$%^&*()_+{}|:"<>?
// 21 symbol keys if we ignore numbers and double brackets, colons, etc

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
/*
 * Base layer (colemak mod-dh)
 * ,---------------------------------------------.           ,---------------------------------------------.
 * |   `    |  1  |  2  |  3  |  4  |  5  | Esc  |           | Esc  |  6  |  7  |  8  |  9  |  0  |   -    |
 * |--------+-----+-----+-----+-----+------------|           |------+-----+-----+-----+-----+-----+--------|
 * |  Tab   |  Q  |  W  |  F  |  P  |  B  |  [   |           |  ]   |  J  |  L  |  U  |  Y  |  ;  |   \    |
 * |--------+-----+-----+-----+-----+-----|      |           |      |-----+-----+-----+-----+-----+--------|
 * |Ctrl/Esc|  A  |  R  |  S  |  T  |  G  |------|           |------|  M  |  N  |  E  |  I  |  O  |   '    |
 * |--------+-----+-----+-----+-----+-----|  -   |           |  =   |-----+-----+-----+-----+-----+--------|
 * | (Shift |  Z  |  X  |  C  |  D  |  V  |      |           |      |  K  |  H  |  ,  |  .  |  /  | Shift) |
 * `--------+-----+-----+-----+-----+------------'           `------------+-----+-----+-----+-----+--------'
 *   | Mute | Vol+|Vol- | Alt | LGUI|                                     | Left|Down | Up  |Right|      |
 *   `------------------------------'                                     `------------------------------'
 *                                   ,------------.          ,------------.
 *                                   | Rst |      |          |      | Rst |
 *                             ,-----|-----|------|          |------+-----+-----.
 *                             |     |     | Home |          | PgUp |     |     |
 *                             |BkSpc| Del |------|          |------|Enter|Space|
 *                             |Alt  | Gui | End  |          | PgDn |Func |Numb |
 *                             `------------------'          `------------------'
 */
[_MOD_DH] = LAYOUT_ergodox(
  // left hand
  KC_GRAVE      , KC_1    , KC_2    , KC_3    , KC_4    , KC_5 , KC_ESC      ,
  KC_TAB        , KC_Q    , KC_W    , KC_F    , KC_P    , KC_B , KC_LBRACKET ,
  CTL_T(KC_ESC) , KC_A    , KC_R    , KC_S    , KC_T    , KC_G ,
  KC_LSPO       , KC_Z    , KC_X    , KC_C    , KC_D    , KC_V , KC_MINUS    ,
  KC_MUTE       , KC_VOLU , KC_VOLD , KC_LALT , KC_LGUI ,

                                                         RESET , KC_NO,
                                                                 KC_HOME,
                MT(MOD_LALT,KC_BSPACE), MT(MOD_LGUI,KC_DELETE) , KC_END,

  // right hand
  KC_ESC,      KC_6, KC_7    , KC_8    , KC_9   , KC_0      , KC_MINUS,
  KC_RBRACKET, KC_J, KC_L    , KC_U    , KC_Y   , KC_SCOLON , KC_BSLASH,
               KC_M, KC_N    , KC_E    , KC_I   , KC_O      , KC_QUOTE,
  KC_EQUAL,    KC_K, KC_H    , KC_COMM , KC_DOT , KC_SLSH   , KC_RSPC,
                     KC_LEFT , KC_DOWN , KC_UP  , KC_RIGHT  , KC_NO,

  RESET   , KC_NO,
  KC_PGUP ,
  KC_PGDN , LT(_FUNC_PUNC,KC_ENTER), LT(_NUMB_SYMB,KC_SPACE)
),

/*
 * Numbers/symbols
 * ,--------------------------------------------------.           ,--------------------------------------------------.
 * |        |      |      |      |      |      |      |           |      |      |      |      |      |      |        |
 * |--------+------+------+------+------+------+------|           |------+------+------+------+------+------+--------|
 * |        |  1!  |  2@  |  3#  |  4$  |  5%  |      |           |      |  6^  |  7&  |  8*  |  9(  |  0)  |        |
 * |--------+------+------+------+------+------|      |           |      |------+------+------+------+------+--------|
 * |        |      |  <   |  {   |  [   |  (   |------|           |------|  )   |  ]   |  }   |  >   |      |        |
 * |--------+------+------+------+------+------|      |           |      |------+------+------+------+------+--------|
 * |        |      |      |  _   |  -   |  '   |      |           |      |  "   |  |   |  =   |      |      |        |
 * `--------+------+------+------+------+-------------'           `-------------+------+------+------+------+--------'
 *   |      |      |      |      |      |                                       |      |      |      |      |      |
 *   `----------------------------------'                                       `----------------------------------'
 */

[_NUMB_SYMB] = LAYOUT_ergodox(
  // left hand
  _______ , _______ , _______ , _______ , _______ , _______ , _______ ,
  _______ , KC_1    , KC_2    , KC_3    , KC_4    , KC_5    , _______ ,
  _______ , _______ , KC_LABK , KC_LCBR , KC_LBRC , KC_LPRN ,
  _______ , _______ , _______ , KC_UNDS , KC_MINS , KC_QUOT , _______ ,
  _______ , _______ , _______ , _______ , _______ ,

                                                     _______, _______,
                                                              _______,
                                            _______, _______, _______,

  // right hand
  _______ , _______ , _______ , _______ , _______ , _______ , _______ ,
  _______ , KC_6    , KC_7    , KC_8    , KC_9    , KC_0    , _______ ,
            KC_RPRN , KC_RBRC , KC_RCBR , KC_RABK , _______ , _______ ,
  _______ , KC_DQUO , KC_PIPE , KC_EQL  , _______ , _______ , _______ ,
                      _______ , _______ , _______ , _______ , _______ ,

  _______, _______,
  _______,
  _______, _______, _______
),

/*
 * Function/punctuation
 * ,--------------------------------------------------.           ,--------------------------------------------------.
 * |        |      |      |      |      |      |      |           |      |      |      |      |      |      |        |
 * |--------+------+------+------+------+------+------|           |------+------+------+------+------+------+--------|
 * |        |  F1  |  F2  |  F3  |  F4  |  F5  |      |           |      |  F6  |  F7  |  F8  |  F9  |  F10 |        |
 * |--------+------+------+------+------+------|      |           |      |------+------+------+------+------+--------|
 * |        |      |      |  ;   |  :   |  \   |------|           |------|  /   |  F11 |  F12 |      |      |        |
 * |--------+------+------+------+------+------|      |           |      |------+------+------+------+------+--------|
 * |        |      |      |  ,   |  .   |  `   |      |           |      |  +   |  ?   |  ~   |      |      |        |
 * `--------+------+------+------+------+-------------'           `-------------+------+------+------+------+--------'
 *   |      |      |      |      |      |                                       |      |      |      |      |      |
 *   `----------------------------------'                                       `----------------------------------'
 *
 */

[_FUNC_PUNC] = LAYOUT_ergodox(
  // left hand
  _______ , _______ , _______ , _______ , _______ , _______ , _______ ,
  _______ , KC_F1   , KC_F2   , KC_F3   , KC_F4   , KC_F5   , _______ ,
  _______ , _______ , _______ , KC_SCLN , KC_COLN , KC_BSLS ,
  _______ , _______ , _______ , KC_COMM , KC_DOT  , KC_GRV  , _______ ,
  _______ , _______ , _______ , _______ , _______ ,

                                                     _______, _______,
                                                              _______,
                                            _______, _______, _______,

  // right hand
  _______ , _______ , _______ , _______ , _______ , _______ , _______ ,
  _______ , KC_F6   , KC_F7   , KC_F8   , KC_F9   , KC_F10  , _______ ,
            KC_SLSH , KC_F11  , KC_F12  , _______ , _______ , _______ ,
  _______ , KC_PLUS , KC_QUES , KC_TILD , _______ , _______ , _______ ,
                      _______ , _______ , _______ , _______ , _______ ,

  _______, _______,
  _______,
  _______, _______, _______
)
};
